<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Song Catalogue | The Lyric Architect</title>
<!-- Load Tailwind CSS -->
<script src="https://cdn.tailwindcss.com"></script>
<style>
/* Custom styles for a clean, dark musical theme */
body {
font-family: 'Inter', sans-serif;
}
.container-bg {
background-color: #1a1a2e; /* Deep blue/purple */
}
.text-accent {
color: #ff6a3d; /* Bright orange/red for contrast */
}
.card {
background-color: #2c2c54; /* Lighter background for content */
cursor: pointer; /* Indicate clickability for player expansion */
}
.genre-tag {
cursor: pointer;
transition: all 0.2s;
}
.genre-tag:hover {
box-shadow: 0 0 10px #ff6a3d;
}
.player-container {
    height: 120px; /* Standard compact SoundCloud player height */
    overflow: hidden;
    transition: height 0.3s ease-out;
}
.player-container.collapsed {
    height: 0;
    padding: 0;
    margin-top: 0;
}
.player-container iframe {
    width: 100%;
    height: 100%;
}
</style>
</head>
<body class="container-bg min-h-screen text-gray-100 flex flex-col">

<!-- Navigation Bar -->
<nav class="bg-slate-900 shadow-xl sticky top-0 z-10">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex items-center justify-between h-16">
            <div class="flex items-center">
                <a href="./index.html" class="flex-shrink-0 text-2xl font-bold text-accent tracking-widest">
                    THE LYRIC ARCHITECT
                </a>
            </div>
            <div class="flex space-x-4">
                <a href="./index.html" class="px-3 py-2 rounded-md text-sm font-medium text-gray-300 hover:bg-gray-700 hover:text-white transition duration-150">Home</a>
                <a href="./about.html" class="px-3 py-2 rounded-md text-sm font-medium text-gray-300 hover:bg-gray-700 hover:text-white transition duration-150">About</a>
                <a href="./catalogue.html" class="px-3 py-2 rounded-md text-sm font-medium bg-accent text-white transition duration-150">Song Catalogue</a>
            </div>
        </div>
    </div>
</nav>

<!-- Main Content Area -->
<main class="flex-grow py-12 px-4 sm:px-6 lg:px-8">
    <div class="max-w-6xl mx-auto">
        <header class="text-center mb-10">
            <h1 class="text-5xl font-extrabold text-white mb-2">The Lyric Architect Song Catalogue</h1>
            <p class="text-xl text-accent">Click on any song to launch the embedded player!</p>
        </header>

        <!-- Genre Filter Section -->
        <section class="bg-[#2c2c54] p-6 rounded-xl shadow-lg mb-8">
            <h2 class="text-2xl font-semibold mb-4 text-white">Filter by Genre:</h2>
            <div id="genre-filters" class="flex flex-wrap gap-2">
                <!-- Filters will be injected here by JavaScript -->
            </div>
        </section>

        <!-- Song List Section -->
        <section class="bg-[#2c2c54] p-6 rounded-xl shadow-lg">
            <h2 id="current-filter-title" class="text-3xl font-bold mb-6 text-white">Showing All Songs</h2>
            
            <div id="song-list" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Song cards will be injected here by JavaScript -->
            </div>
            
            <div id="no-results" class="text-center py-10 hidden">
                <p class="text-xl text-gray-400">No songs found for this genre.</p>
            </div>
        </section>
    </div>
</main>

<!-- Footer -->
<footer class="bg-slate-900 mt-8 py-4 text-center text-gray-400 text-sm">
    <p>&copy; 2024 The Lyric Architect. All Rights Reserved. | Rickie Lee Reeves</p>
</footer>

<script>
    // NOTE: This list contains 44 songs, based on the last complete data provided.
    // If you have more songs, please provide the complete list so this array can be updated!
    const songs = [
        { "title": "sports sports sports sports", "genre": "rap", "soundcloud_link": "https://soundcloud.com/user-344154267/sports-sports-sports-sports" },
        { "title": "oopsie doopsie rap version", "genre": "rap", "soundcloud_link": "https://soundcloud.com/user-344154267/oopsie-doopsie-rap-version?in=user-344154267/sets/rap-hip-gospel" },
        { "title": "sports sports sports sports 1", "genre": "hiphop", "soundcloud_link": "https://soundcloud.com/user-344154267/sports-sports-sports-sports-1" },
        { "title": "had to be bad before you were", "genre": "hiphop", "soundcloud_link": "https://soundcloud.com/user-344154267/had-to-be-bad-before-you-were" },
        { "title": "stone cold eyes a rocker", "genre": "stone cold blues eyes", "soundcloud_link": "https://soundcloud.com/user-344154267/stone-cold-eyes-a-rocker" },
        { "title": "my lyrics in the air", "genre": "lyrics in the Air", "soundcloud_link": "https://soundcloud.com/user-344154267/my-lyrics-in-the-air" },
        { "title": "a bottom", "genre": "lyrics in the air", "soundcloud_link": "https://www.google.com/search?q=https://soundcloud.com/user-344154267/a-bottom-with-your-name-on-it%3Fin%3Duser-344154267/sets/country-counry-rock" },
        { "title": "dont think me crazy 1", "genre": "country", "soundcloud_link": "https://soundcloud.com/user-344154267/dont-think-me-crazy-1?utm_source=clipboard&utm_medium=text&utm_campaign=social_sharing&si=d325f9a160234be2af44da63cb209858" },
        { "title": "harmonica blues stomp 7", "genre": "country", "soundcloud_link": "https://soundcloud.com/user-344154267/harmonica-blues-stomp-7?utm_source=clipboard&utm_medium=text&utm_campaign=social_sharing&si=0f6a30c81e2841c0a138de43a25b3ba2" },
        { "title": "cant love no woman", "genre": "country", "soundcloud_link": "https://soundcloud.com/user-344154267/cant-love-no-woman?utm_source=clipboard&utm_medium=text&utm_campaign=social_sharing&si=f9d6c2ab496042c6b76868b2370bbbd5" },
        { "title": "you were too good for me", "genre": "neo pop rock", "soundcloud_link": "https://soundcloud.com/user-344154267/you-were-too-good-for-me" },
        { "title": "The Last Juke on the 99", "genre": "blues", "soundcloud_link": "https://soundcloud.com/user-344154267/the-last-juke-on-the-99-1?utm_source=clipboard&utm_medium=text&utm_campaign=social_sharing&si=2cc634d47f88497990c1bb093ecaaa78" },
        { "title": "Keep Getting Worse", "genre": "blues", "soundcloud_link": "https://soundcloud.com/user-344154267/keep-getting-worse?utm_source=clipboard&utm_medium=text&utm_campaign=social_sharing&si=632c19d5ce164921b351c560d927124f" },
        { "title": "Dehydrated All Dried Up", "genre": "blues", "soundcloud_link": "https://soundcloud.com/user-344154267/dehydrated-all-dried-up?utm_source=clipboard&utm_medium=text&utm_campaign=social_sharing&si=92448ad4c9dc43c9a6beaf24a820d0b6" },
        { "title": "Said Freedom", "genre": "rock", "soundcloud_link": "https://soundcloud.com/user-344154267/said-freedom-1?utm_source=clipboard&utm_medium=text&utm_campaign=social_sharing&si=189bae2f8cc14931a1eb25bd1cc3fadd" },
        { "title": "Liar Liar Dicks On Fire", "genre": "rock", "soundcloud_link": "https://soundcloud.com/user-344154267/liar-liar-dicks-on-fire?utm_source=clipboard&utm_medium=text&utm_campaign=social_sharing&si=300be3fc5caa4bd1bb95fc0f793f6a2d" },
        { "title": "Hotel Blues", "genre": "blues", "soundcloud_link": "https://soundcloud.com/user-344154267/hotel-blues-1?utm_source=clipboard&utm_medium=text&utm_campaign=social_sharing&si=425c56fdf32447359ae2e7232ff3648c" },
        { "title": "High Up On That Mountain", "genre": "gospel", "soundcloud_link": "https://soundcloud.com/user-344154267/high-up-on-that-mountain?utm_source=clipboard&utm_medium=text&utm_campaign=social_sharing&si=811068000ff04648a735cd197499cba0" },
        { "title": "Why Worry About It", "genre": "rock", "soundcloud_link": "https://soundcloud.com/user-344154267/why-worry-about-it-1?utm_source=clipboard&utm_medium=text&utm_campaign=social_sharing&si=fca4e4e509504a16886b187158d71688" },
        { "title": "New World Order No Kings", "genre": "rock", "soundcloud_link": "https://soundcloud.com/user-344154267/new-world-order-no-kings?utm_source=clipboard&utm_medium=text&utm_campaign=social_sharing&si=7cf25e55de444e61a8f81c6d3af25485" },
        { "title": "Too High Gotta Go Down", "genre": "rock", "soundcloud_link": "https://soundcloud.com/user-344154267/too-high-gotta-go-down?utm_source=clipboard&utm_medium=text&utm_campaign=social_sharing&si=493c8a0e1aae462d92e6868b2c81be08" },
        { "title": "2 Outa 3 Ain't Bad", "genre": "rock", "soundcloud_link": "https://soundcloud.com/user-344154267/2-outa-3-aint-bad-1?utm_source=clipboard&utm_medium=text&utm_campaign=social_sharing&si=4500f5962d354ab1ba3830635f840a76" },
        { "title": "Show Me Don't Tell Me", "genre": "rock", "soundcloud_link": "https://soundcloud.com/user-344154267/show-me-dont-tell-me?utm_source=clipboard&utm_medium=text&utm_campaign=social_sharing&si=1d56fe60a143437aa2e3421b82c5e464" },
        { "title": "Hungry", "genre": "rock", "soundcloud_link": "https://soundcloud.com/user-344154267/hungry-2?utm_source=clipboard&utm_medium=text&utm_campaign=social_sharing&si=d5ab37ff92c742f0b9d31c5c91a780ab" },
        { "title": "Happiness Remix 1", "genre": "rock", "soundcloud_link": "https://soundcloud.com/user-344154267/happiness-remix-1?utm_source=clipboard&utm_medium=text&utm_campaign=social_sharing&si=f514a525b2cd4e57b748a543c050e67e" },
        { "title": "Happiness Remix 2", "genre": "rock", "soundcloud_link": "https://soundcloud.com/user-344154267/happiness-remix-2?utm_source=clipboard&utm_medium=text&utm_campaign=social_sharing&si=409c9d6975894efd85aa4fbd3e502f52" },
        { "title": "Red Beans and Rice", "genre": "rock", "soundcloud_link": "https://soundcloud.com/user-344154267/red-beans-and-rice?utm_source=clipboard&utm_medium=text&utm_campaign=social_sharing&si=a6acc3091dce40f591982ec931539240" },
        { "title": "Devil Tried to Take My Soul 1", "genre": "gospel", "soundcloud_link": "https://soundcloud.com/user-344154267/devil-tried-1-1?utm_source=clipboard&utm_medium=text&utm_campaign=social_sharing&si=581a69b92d8049b4b24680ca2fd81eed" },
        { "title": "Devil Tried to Take My Soul 2", "genre": "gospel", "soundcloud_link": "https://soundcloud.com/user-344154267/devil-tried-to-take-my-soul-2?utm_source=clipboard&utm_medium=text&utm_campaign=social_sharing&si=ae8cda6b8f414e4fb9e39a806e45134f" },
        { "title": "Devil Tried Harp", "genre": "gospel", "soundcloud_link": "https://www.google.com/search?q=https://soundcloud.com/user-344154267/devil-tried-1-2-harp%3Futm_source%3Dclipboard%26utm_medium%3Dtext%26utm_campaign%3Dsocial_sharing%26si%3Db385fd2cb2f77329b0f2e09ccbdf2b6d" },
        { "title": "1 of the 10 G Harp", "genre": "gospel", "soundcloud_link": "https://soundcloud.com/user-344154267/1-of-the-10-g-harp?utm_source=clipboard&utm_medium=text&utm_campaign=social_sharing&si=ab3442e96bb14eb4a4906fa4805a942f" },
        { "title": "Another Dollar", "genre": "blues", "soundcloud_link": "https://soundcloud.com/user-344154267/another-dollar-2?utm_source=clipboard&utm_medium=text&utm_campaign=social_sharing&si=97cf922f3c6c4b61959a8dd269df3019" },
        { "title": "Cross Harp", "genre": "blues", "soundcloud_link": "https://soundcloud.com/user-344154267/cross-harp-2?utm_source=clipboard&utm_medium=text&utm_campaign=social_sharing&si=09ab3b28e8fa4023b36947bdfafe9869" },
        { "title": "Evil Man", "genre": "blues", "soundcloud_link": "https://www.google.com/search?q=https://soundcloud.com/user-344154267/evil-man-1%3Futm_source%3Dclipboard%26utm_medium%3Dtext%26utm_campaign%3Dsocial_sharing%26si%3D1980e42740264b09bf394648f236ae61" },
        { "title": "Driving Me Crazy", "genre": "blues", "soundcloud_link": "https://soundcloud.com/user-344154267/driving-me-crazy?utm_source=clipboard&utm_medium=text&utm_campaign=social_sharing&si=a6d3400f69954c46b561eb800d81b431" },
        { "title": "Medd In", "genre": "country", "soundcloud_link": "https://soundcloud.com/user-344154267/medd-in?utm_source=clipboard&utm_medium=text&utm_campaign=social_sharing&si=3fcdf1d252cf4926a7ab1bc75b504b53" },
        { "title": "Wildest Dreams", "genre": "pop rock", "soundcloud_link": "https://www.google.com/search?q=https://soundcloud.com/user-344154267/wildest-dreams" },
        { "title": "Runnin Fore I Hit The Ground", "genre": "txmx", "soundcloud_link": "https://soundcloud.com/user-344154267/runnin-fore-i-hit-the-ground" },
        { "title": "My Little Feat Keep Me Runnin", "genre": "little feat", "soundcloud_link": "https://soundcloud.com/user-344154267/my-little-feat-keep-me-runnin" },
        { "title": "I Hit The Ground A Runnin", "genre": "hip rap", "soundcloud_link": "https://soundcloud.com/user-344154267/i-hit-the-ground-a-runnin-hip" },
        { "title": "Dream Drift", "genre": "blues dream drift", "soundcloud_link": "https://soundcloud.com/user-344154267/dream-drift" },
        { "title": "Barn Rockin", "genre": "blues barn rockin'", "soundcloud_link": "https://soundcloud.com/user-344154267/barn-rockin" },
        { "title": "Deceiver", "genre": "soul r&b rock", "soundcloud_link": "https://soundcloud.com/user-344154267/deceiver" },
        { "title": "I Can't Afford Free", "genre": "pop rock", "soundcloud_link": "https://soundcloud.com/user-344154267/i-cant-afford-free" },
        { "title": "Cryin' Shame", "genre": "rap hiphop r&b", "soundcloud_link": "https://soundcloud.com/user-344154267/cryn-shame" }
    ];

    const songListElement = document.getElementById('song-list');
    const filtersElement = document.getElementById('genre-filters');
    const filterTitleElement = document.getElementById('current-filter-title');
    const noResultsElement = document.getElementById('no-results');

    // State to track which player is currently open
    let activePlayerId = null;

    // Helper function to normalize genre names (lowercase and trim whitespace)
    const normalizeGenre = (genre) => genre.toLowerCase().trim();

    // Helper function to convert a SoundCloud track URL into an embed URL
    const getEmbedUrl = (trackUrl) => {
        // Strip out Google search wrapper if present, and any query parameters
        let cleanUrl = trackUrl.split('?')[0];

        // This attempts to handle the Google link wrappers that appear in your dataset:
        if (cleanUrl.includes('google.com/search')) {
            const match = cleanUrl.match(/q=(https?:\/\/[^\s&]+)/);
            if (match) {
                // Decode the URL and clean it up again
                cleanUrl = decodeURIComponent(match[1]).split('?')[0];
            } else {
                // Fallback for completely unusable links
                return null; 
            }
        }

        // Check if it's a direct SoundCloud track URL
        if (cleanUrl.includes('soundcloud.com/')) {
             // Use the standard embed format, with color matching your theme (#ff6a3d)
            return `https://w.soundcloud.com/player/?url=${encodeURIComponent(cleanUrl)}&color=%23ff6a3d&auto_play=false&hide_related=false&show_comments=false&show_user=false&show_reposts=false&show_teaser=false`;
        }
        return null;
    };

    // Function to toggle the visibility of the embedded player
    const togglePlayer = (songId) => {
        const playerContainer = document.getElementById(`player-container-${songId}`);
        const cardElement = document.getElementById(`song-card-${songId}`);
        const playButton = document.getElementById(`play-button-${songId}`);

        if (!playerContainer || !cardElement || !playButton) {
            console.error('Player elements not found for ID:', songId);
            return;
        }

        if (activePlayerId === songId) {
            // Collapse the current player
            playerContainer.classList.add('collapsed');
            cardElement.classList.remove('border-green-400');
            // Change button to 'Play' icon
            playButton.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5 mr-2"><path fill-rule="evenodd" d="M2 10a8 8 0 1116 0 8 8 0 01-16 0zm6.394-2.886a.75.75 0 00-1.14 0l-3.294 3.473a.75.75 0 000 1.121l3.294 3.473a.75.75 0 001.14 0l3.294-3.473a.75.75 0 000-1.121l-3.294-3.473z" clip-rule="evenodd" /></svg> Play Track`;
            activePlayerId = null;
        } else {
            // Collapse previously active player if one exists
            if (activePlayerId) {
                togglePlayer(activePlayerId);
            }

            // Expand the new player
            playerContainer.classList.remove('collapsed');
            cardElement.classList.add('border-green-400');
            // Change button to 'Close' icon
            playButton.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5 mr-2"><path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z" /></svg> Close Player`;
            activePlayerId = songId;
        }
    };

    // Function to render a single song card with the new player structure
    const renderSongCard = (song, index) => {
        const songId = `song-${index}`;
        // Gets only the first genre for display on the card
        const primaryGenre = song.genre.split(/[ ,&]+/)[0]; 
        const embedUrl = getEmbedUrl(song.soundcloud_link);

        if (!embedUrl) {
            // Fallback for bad/non-soundcloud links
            return `<div class="card p-5 rounded-xl shadow-xl border-b-4 border-red-500">
                <h3 class="text-xl font-bold mb-2 text-white capitalize">${song.title}</h3>
                <p class="text-sm text-gray-400 mb-4">Genre: <span class="text-accent/90 capitalize">${primaryGenre}</span></p>
                <p class="text-red-400 text-xs">Error: Invalid media URL provided.</p>
            </div>`;
        }

        return `
            <div class="card p-5 rounded-xl shadow-xl transition duration-300 border-b-4 border-accent/70 hover:border-accent">
                <div id="song-card-${songId}" class="group" onclick="togglePlayer('${songId}')">
                    <div class="relative mb-4">
                        <h3 class="text-xl font-bold text-white capitalize">${song.title}</h3>
                        <p class="text-sm text-gray-400 mb-2">Genre: <span class="text-accent/90 capitalize">${primaryGenre}</span></p>

                        <!-- Branded Element -->
                        <div class="absolute top-0 right-0 p-1 bg-accent/90 rounded-bl-lg text-xs font-semibold text-slate-900 
                                     transform translate-y-[-16px] translate-x-1 transition duration-300 group-hover:scale-105">
                            THE LYRIC ARCHITECT
                        </div>
                    </div>
                    
                    <button id="play-button-${songId}" 
                            class="flex items-center justify-center w-full bg-accent hover:bg-orange-600 text-slate-900 font-semibold py-2 px-4 rounded-lg transition duration-150 text-sm shadow-md">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5 mr-2">
                            <path fill-rule="evenodd" d="M2 10a8 8 0 1116 0 8 8 0 01-16 0zm6.394-2.886a.75.75 0 00-1.14 0l-3.294 3.473a.75.75 0 000 1.121l3.294 3.473a.75.75 0 001.14 0l3.294-3.473a.75.75 0 000-1.121l-3.294-3.473z" clip-rule="evenodd" />
                        </svg>
                        Play Track
                    </button>
                </div>
                
                <!-- Embedded Player Container (Starts Collapsed) -->
                <div id="player-container-${songId}" class="player-container collapsed mt-4">
                    <iframe 
                        src="${embedUrl}" 
                        frameborder="no" 
                        allow="autoplay" 
                        scrolling="no" 
                        height="120" 
                        width="100%">
                    </iframe>
                </div>
            </div>
        `;
    };

    // Function to render the filtered song list
    const renderSongs = (filteredSongs, currentGenre) => {
        songListElement.innerHTML = '';
        activePlayerId = null; // Reset player state on new filter
        
        if (filteredSongs.length === 0) {
            songListElement.classList.add('hidden');
            noResultsElement.classList.remove('hidden');
        } else {
            songListElement.classList.remove('hidden');
            noResultsElement.classList.add('hidden');
            
            // Render songs, passing the index for unique IDs
            const html = filteredSongs.map((song, index) => renderSongCard(song, index)).join('');
            songListElement.innerHTML = html;
        }

        const titleText = currentGenre === 'all' ? `Showing All Songs (${songs.length})` : `Showing Genre: ${currentGenre.toUpperCase()}`;
        filterTitleElement.textContent = titleText;
        
        // Update active filter button styling
        document.querySelectorAll('.genre-tag').forEach(btn => {
            btn.classList.remove('bg-accent', 'text-slate-900', 'bg-gray-600', 'text-white');
            if (normalizeGenre(btn.dataset.genre) === currentGenre) {
                btn.classList.add('bg-accent', 'text-slate-900');
            } else {
                btn.classList.add('bg-gray-600', 'text-white');
            }
        });
    };

    // Function to handle filtering logic
    const filterSongs = (genre) => {
        const normalizedGenre = normalizeGenre(genre);

        if (normalizedGenre === 'all') {
            renderSongs(songs, 'all');
        } else {
            const filtered = songs.filter(song => {
                const songGenres = song.genre.split(/[ ,&]+/).map(g => normalizeGenre(g));
                return songGenres.includes(normalizedGenre);
            });
            renderSongs(filtered, normalizedGenre);
        }
    };

    // Function to create and attach genre filter buttons
    const createGenreFilters = () => {
        let allGenres = songs.flatMap(song => song.genre.split(/[ ,&]+/).map(normalizeGenre));
        const uniqueGenres = [...new Set(allGenres)].filter(g => g !== '').sort();

        // All Songs button
        let genreButtonsHtml = `
            <button class="genre-tag bg-accent text-slate-900 px-4 py-2 rounded-full text-sm font-medium hover:bg-orange-600" data-genre="all">
                All Songs (${songs.length})
            </button>
        `;

        // Genre buttons
        genreButtonsHtml += uniqueGenres.map(genre => {
            const count = songs.filter(song => {
                const songGenres = song.genre.split(/[ ,&]+/).map(normalizeGenre);
                return songGenres.includes(genre);
            }).length;
            
            if (count > 0) {
                return `
                    <button class="genre-tag bg-gray-600 text-white px-4 py-2 rounded-full text-sm font-medium hover:bg-gray-500 capitalize" data-genre="${genre}">
                        ${genre} (${count})
                    </button>
                `;
            }
            return '';
        }).join('');

        filtersElement.innerHTML = genreButtonsHtml;

        filtersElement.addEventListener('click', (event) => {
            const target = event.target.closest('.genre-tag');
            if (target) {
                filterSongs(target.dataset.genre);
            }
        });
    };

    // Expose togglePlayer to the global scope so it can be called from the onclick attribute
    window.togglePlayer = togglePlayer;
    
    // Initialize the page on load
    window.onload = () => {
        createGenreFilters();
        filterSongs('all');
    };
</script>

</body>
</html>
